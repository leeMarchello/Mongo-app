<!DOCTYPE html>
<html>
<title>Register</title>

<head>
    <link rel='stylesheet' type='text/css' href='./style.css'>
	<script type='text/javascript'>
		
        function makeCall() {
			
		var Mylist = [] ;
		var name = document.getElementById("name").value;
		var surname = document.getElementById("surname").value;
		var schoolname = document.getElementById("schoolname").value;
		var province = document.getElementById("province");
        var centre = province.options[province.selectedIndex].value;
		var grade = document.getElementById("grade").value;
		var age = document.getElementById("age").value;
		var email = document.getElementById("email").value;
		var password = document.getElementById("password").value;
		var conpassword = document.getElementById("confirmed").value;
		//var myupload = document.getElementById("Upload").value;
		if(password.value !== conpassword.value){
			alert("Blyat! The passwords are not the same!");
		} else if(password.value === conpassword.value){
			console.log("hello");
			Mylist.push(name);
			Mylist.push(surname);
			Mylist.push(schoolname);
			Mylist.push(centre);
			Mylist.push(grade);
			Mylist.push(age);
			Mylist.push(email);
			Mylist.push(password);
			Mylist.push(conpassword);
			alert("Application submitted!");
		}else{
			alert("Nothing is entered! Blyat!");
		}
	
			fetch(`http://localhost:9000/api/register`, {
				method: "POST",
				headers: {
					'Accept': 'application/json',
					'Content-Type': 'application/json',
				},
				body: JSON.stringify(
					{
						name: name, 
						surname: schoolname,
						schoolName: schoolname,
						grade: grade,
						age: age,
						email: email,
					}
				)
			}).then(res => console.log("response: ", res));
        }
    </script>
</head>

<body>
	<form>
		<div class = "container">
			<h1>Registration for Inspire Academy</h1>

			<fieldset>
				<legend>Information about you</legend>
					<label><b>Name</b></label>
					<input id="name" type="text" placeholder="Enter Name" required>

					<label><b>Surname</b></label>
					<input id="surname" type="text" placeholder="Enter Surname" required>

					<label><b>School Name</b></label>
					<input id="schoolname" type="text" placeholder="Enter your current school name" required>

					<label><b>Grade</b></label>
					<input id="grade" type="number" placeholder="Enter your grade" required>

					<label><b>Centre</b></label>
					<select id="province" name="province" placeholder="Choose your centre">
						<option value="soweto">Soweto</option>
						<option value="kingwilliamstown">King Williams Town</option>
						<option value="bisho1">Bisho 1</option>
						<option value="bisho2">Bisho 2</option>
					</select>

					<div>
						<label id="gender"><b>Gender</b></label><br>

						<div id="genderoption">
							<label for="gender-male">Male</label>
							<input type="radio" name="gender-choice" value="choice-1">

							<label for="gender-female">Female</label>
							<input type="radio" name="gender-choice" value="choice-2">
						</div>
					</div>

					<br>
					<form>
							<label for=""><b>Course</b></label> <br>
							<input type="checkbox" id="mathematics" value="mathematics" > Mathematics<br>
							<input type="checkbox" id="ICT" value="ICT" > ICT<br>
							<input type="checkbox" id="accounting" value="accounting" > Accounting<span id="acc">Grade 8-12 ONLY.</span><br>
							<input type="checkbox" id="science" value="science" > Science<span id="sci">Grade 8-12 ONLY.</span><br>
							
					</form>

					<br>
					<label><b>Age</b></label>
					<input id="age" type="number" placeholder="Enter Age" required>

					<label for="email"><b>Email</b></label>
					<input id="email" type="email" placeholder="Enter Email" name="email" required>

					<label for="psw"><b>Password</b></label>
					<input id="password" type="password" placeholder="Enter Password" required>

					<label for="confirmpsw"><b>Confirm Password</b></label>
					<input id="confirmed" type="password" placeholder="Confirm Your Password">

					<label for="Upload"><b>Parental Agreement</b></label>
						<div>
							<input type="file" id="parental" hidden="hidden">
							<button type="button" id="parentalB">Choose a file</button>
							<span id="parentalS">No file chosen, yet.</span>
						</div>
					<label for="Upload"><b>School Performance</b></label>
						<div>
							<input type="file" id="school" hidden="hidden">
							<button type="button" id="schoolBtn">Choose a file</button>
							<span id="schooltxt">No file chosen, yet.</span>
						</div>

						<script type="text/javascript">
							const parentalBB = document.getElementById("parental");
							const parentalBtn = document.getElementById("parentalB");
							const parentalTXT = document.getElementById("parentalS"); 

							parentalBtn.addEventListener("click",function(){
								parentalBB.click();
							});

							parentalBB.addEventListener("change",function(){
								if(parentalBB.value){
									parentalTXT.innerHTML = parentalBB.value.match(/[\/\\]([\w\d\s\.\-\(\)]+)$/)[1];
								} else{
									parentalTXT.innerHTML = "No file chosen, yet.";
								}
							});

							const schoolBtn1 = document.getElementById("school");
							const schoolBtn2 = document.getElementById("schoolBtn");
							const schoolTxt = document.getElementById("schooltxt");

							schoolBtn2.addEventListener("click", function() {
								schoolBtn1.click();
							});

							schoolBtn1.addEventListener("change",function() {
								if(schoolBtn1.value){
									schoolTxt.innerHTML = schoolBtn1.value.match(/[\/\\]([\w\d\s\.\-\(\)]+)$/)[1];
								} else{
									schoolTxt.innerHTML = "No file chosen, yet.";
								}
							});

						</script>
			</fieldset>
		</div>
		<div>
			<button type="submit" class="btn success" onclick='makeCall()' >Register</button>
		</div>
	</form>
</body>
</html>
